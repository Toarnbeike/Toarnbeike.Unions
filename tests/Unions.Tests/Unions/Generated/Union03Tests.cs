# nullable enable

// <auto-generated>
//   This file was generated by Toarnbeike.Unions.Tests.StaticGenerator.
//   Generator: UnionTestGenerator (v. 1.3.0)
//   Created: 2026-02-01 12:28:53Z
//   These test are auto-generated. Do not modify.
// </auto-generated>

using Toarnbeike.Unions.Generic;
using Toarnbeike.Unions.Tests.TestTypes;

namespace Toarnbeike.Unions.Tests.Unions.Generated;

public class Union03Tests
{
    [Test]
    public void FromT1_SetsIndex1()
    {
        var union = Union<U1,U2,U3>.FromT1(new U1(1));

        union.Index.ShouldBe((byte)1);
        union.IsT1.ShouldBeTrue();
        union.IsT2.ShouldBeFalse();
        union.IsT3.ShouldBeFalse();
    }

    [Test]
    public void FromT2_SetsIndex2()
    {
        var union = Union<U1,U2,U3>.FromT2(new U2(2));

        union.Index.ShouldBe((byte)2);
        union.IsT2.ShouldBeTrue();
        union.IsT1.ShouldBeFalse();
        union.IsT3.ShouldBeFalse();
    }

    [Test]
    public void FromT3_SetsIndex3()
    {
        var union = Union<U1,U2,U3>.FromT3(new U3(3));

        union.Index.ShouldBe((byte)3);
        union.IsT3.ShouldBeTrue();
        union.IsT1.ShouldBeFalse();
        union.IsT2.ShouldBeFalse();
    }
    [Test]
    public void FromT1_Throws_WhenValueIsNull()
    {
        Should.Throw<ArgumentNullException>(() => Union<U1,U2,U3>.FromT1(null!));
    }
    [Test]
    public void FromT2_Throws_WhenValueIsNull()
    {
        Should.Throw<ArgumentNullException>(() => Union<U1,U2,U3>.FromT2(null!));
    }
    [Test]
    public void FromT3_Throws_WhenValueIsNull()
    {
        Should.Throw<ArgumentNullException>(() => Union<U1,U2,U3>.FromT3(null!));
    }

    [Test]
    public void AsT1_ReturnsValue_WhenCorrectVariant()
    {
        var expected = new U1(1);
        var union = Union<U1,U2,U3>.FromT1(expected);

        union.AsT1.ShouldBe(expected);
    }

    [Test]
    public void AsT1_Throws_WhenWrongVariant()
    {
        var expected = new U2(1);
        var union = Union<U1,U2,U3>.FromT2(expected);

        var ex = Should.Throw<InvalidOperationException>(() => _ = union.AsT1);
        ex.Message.ShouldBe("Union is not in T1 state.");
    }

    [Test]
    public void AsT2_ReturnsValue_WhenCorrectVariant()
    {
        var expected = new U2(2);
        var union = Union<U1,U2,U3>.FromT2(expected);

        union.AsT2.ShouldBe(expected);
    }

    [Test]
    public void AsT2_Throws_WhenWrongVariant()
    {
        var expected = new U1(2);
        var union = Union<U1,U2,U3>.FromT1(expected);

        var ex = Should.Throw<InvalidOperationException>(() => _ = union.AsT2);
        ex.Message.ShouldBe("Union is not in T2 state.");
    }

    [Test]
    public void AsT3_ReturnsValue_WhenCorrectVariant()
    {
        var expected = new U3(3);
        var union = Union<U1,U2,U3>.FromT3(expected);

        union.AsT3.ShouldBe(expected);
    }

    [Test]
    public void AsT3_Throws_WhenWrongVariant()
    {
        var expected = new U1(3);
        var union = Union<U1,U2,U3>.FromT1(expected);

        var ex = Should.Throw<InvalidOperationException>(() => _ = union.AsT3);
        ex.Message.ShouldBe("Union is not in T3 state.");
    }

    [Test]
    public void TryGetT1_ReturnsTrue_AndOutputsValue_WhenT1()
    {
        var expected = new U1(1);
        var union = Union<U1,U2,U3>.FromT1(expected);

        union.TryGetT1(out var actual).ShouldBeTrue();
        actual.ShouldBe(expected);
    }

    [Test]
    public void TryGetT1_ReturnFalse_AndOutputsDefault_WhenNotT1()
    {
        var expected = new U2(1);
        var union = Union<U1,U2,U3>.FromT2(expected);

        union.TryGetT1(out var actual).ShouldBeFalse();
        actual.ShouldBe(null);
    }

    [Test]
    public void TryGetT2_ReturnsTrue_AndOutputsValue_WhenT2()
    {
        var expected = new U2(2);
        var union = Union<U1,U2,U3>.FromT2(expected);

        union.TryGetT2(out var actual).ShouldBeTrue();
        actual.ShouldBe(expected);
    }

    [Test]
    public void TryGetT2_ReturnFalse_AndOutputsDefault_WhenNotT2()
    {
        var expected = new U1(2);
        var union = Union<U1,U2,U3>.FromT1(expected);

        union.TryGetT2(out var actual).ShouldBeFalse();
        actual.ShouldBe(null);
    }

    [Test]
    public void TryGetT3_ReturnsTrue_AndOutputsValue_WhenT3()
    {
        var expected = new U3(3);
        var union = Union<U1,U2,U3>.FromT3(expected);

        union.TryGetT3(out var actual).ShouldBeTrue();
        actual.ShouldBe(expected);
    }

    [Test]
    public void TryGetT3_ReturnFalse_AndOutputsDefault_WhenNotT3()
    {
        var expected = new U1(3);
        var union = Union<U1,U2,U3>.FromT1(expected);

        union.TryGetT3(out var actual).ShouldBeFalse();
        actual.ShouldBe(null);
    }

    [Test]
    public void DefaultInstance_HasIndex0_AndIsInvalid()
    {
        var union = default(Union<U1,U2,U3>);

        union.Index.ShouldBe((byte)0);

        union.IsT1.ShouldBeFalse();
        union.IsT2.ShouldBeFalse();
        union.IsT3.ShouldBeFalse();
        
        union.TryGetT1(out _).ShouldBeFalse();
        union.TryGetT2(out _).ShouldBeFalse();
        union.TryGetT3(out _).ShouldBeFalse();

        Should.Throw<InvalidOperationException>(() => _ = union.AsT1);
        Should.Throw<InvalidOperationException>(() => _ = union.AsT2);
        Should.Throw<InvalidOperationException>(() => _ = union.AsT3);
    }

    [Test]
    public void Equality_Works_ForSameVariant_AndSameValue()
    {
        var a = Union<U1,U2,U3>.FromT1(new U1(1));
        var b = Union<U1,U2,U3>.FromT1(new U1(1));

        a.ShouldBe(b);
    }

    [Test]
    public void Equality_Fails_ForDifferentVariants()
    {
        var a = Union<U1,U2,U3>.FromT1(new U1(1));
        var b = Union<U1,U2,U3>.FromT2(new U2(1));

        a.ShouldNotBe(b);
    }

    [Test]
    public void Equality_Fails_ForSameVariant_AndDifferentValue()
    {
        var a = Union<U1,U2,U3>.FromT1(new U1(1));    
        var b = Union<U1,U2,U3>.FromT1(new U1(2));

        a.ShouldNotBe(b);
    }

    [Test]
    public void DebuggerToString_ReturnsExpectedFormat_WhenT1()
    {
        var union = Union<U1,U2,U3>.FromT1(new U1(1));
        var type = typeof(Union<U1,U2,U3>);
        var method = type.GetMethod("DebuggerToString", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
        var actual = (string)method!.Invoke(union, null)!;
        actual.ShouldBe("T1 (U1) = U1 { Value = 1 }");
    }

    [Test]
    public void DebuggerToString_ReturnsExpectedFormat_WhenT2()
    {
        var union = Union<U1,U2,U3>.FromT2(new U2(2));
        var type = typeof(Union<U1,U2,U3>);
        var method = type.GetMethod("DebuggerToString", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
        var actual = (string)method!.Invoke(union, null)!;
        actual.ShouldBe("T2 (U2) = U2 { Value = 2 }");
    }

    [Test]
    public void DebuggerToString_ReturnsExpectedFormat_WhenT3()
    {
        var union = Union<U1,U2,U3>.FromT3(new U3(3));
        var type = typeof(Union<U1,U2,U3>);
        var method = type.GetMethod("DebuggerToString", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
        var actual = (string)method!.Invoke(union, null)!;
        actual.ShouldBe("T3 (U3) = U3 { Value = 3 }");
    }

    [Test]
    public void DebuggerToString_ReturnsExpectedFormat_WhenUninitialized()
    {
        var union = default(Union<U1,U2,U3>);
        var type = typeof(Union<U1,U2,U3>);
        var method = type.GetMethod("DebuggerToString", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
        var actual = (string)method!.Invoke(union, null)!;
        actual.ShouldBe("<uninitialized>");
    }
}