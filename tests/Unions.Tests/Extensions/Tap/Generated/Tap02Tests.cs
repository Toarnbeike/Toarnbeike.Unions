# nullable enable

// <auto-generated>
//   This file was generated by Toarnbeike.Unions.Tests.StaticGenerator.
//   Generator: TapExtensionsTestsGenerator (v. 1.0.0)
//   Created: 2025-12-17 16:17:43Z
//   These test are auto-generated. Do not modify.
// </auto-generated>

using Toarnbeike.Unions.Extensions;
using Toarnbeike.Unions.TestExtensions;
using Toarnbeike.Unions.Tests.Unions.TestTypes;
// Resharper disable UnusedParameter.Local

namespace Toarnbeike.Unions.Tests.Extensions.Tap.Generated;

public class Tap02Tests
{
    private static Union<U1,U2> MakeT1(int v) => Union<U1,U2>.FromT1(new U1(v));
    private static Union<U1,U2> MakeT2(int v) => Union<U1,U2>.FromT2(new U2(v));

    private static Union<U1,U2> ShouldNotBeCalled(int original) => throw new ShouldNotBeCalledException();
    private static Task<Union<U1,U2>> ShouldNotBeCalledAsync(int original) => throw new ShouldNotBeCalledException();

    [Test]
    public void TapT1_Should_Invoke_T1Func_WhenT1()
    {
        var union = MakeT1(1);
        var actual = "";

        var result = union.TapT1(u1 => actual = $"U1:{u1.Value}");
        
        result.ShouldBe(union);
        actual.ShouldBe("U1:1");
    }

    [Test]
    public void TapT1_Should_NotInvoke_WhenT2()
    {
        var union = MakeT2(2);

        var result = union.TapT1(u1 => ShouldNotBeCalled(u1.Value));

        result.ShouldBe(union);
    }

    [Test]
    public void TapT1_Throws_When_T1Func_ReturnsNull()
    {
        var union = MakeT1(1);
        
        Should.Throw<ArgumentNullException>(() => union.TapT1(null!));
    }

    [Test]
    public void TapT2_Should_Invoke_T2Func_WhenT2()
    {
        var union = MakeT2(2);
        var actual = "";

        var result = union.TapT2(u2 => actual = $"U2:{u2.Value}");
        
        result.ShouldBe(union);
        actual.ShouldBe("U2:2");
    }

    [Test]
    public void TapT2_Should_NotInvoke_WhenT1()
    {
        var union = MakeT1(1);

        var result = union.TapT2(u2 => ShouldNotBeCalled(u2.Value));

        result.ShouldBe(union);
    }

    [Test]
    public void TapT2_Throws_When_T2Func_ReturnsNull()
    {
        var union = MakeT2(2);
        
        Should.Throw<ArgumentNullException>(() => union.TapT2(null!));
    }

    [Test]
    public async Task TapT1Async_Should_Invoke_T1Func_WhenT1()
    {
        var union = MakeT1(1);
        var actual = "";

        var result = await union.TapT1Async(async u1 => { await Task.Yield(); actual = $"U1:{u1.Value}"; });

        result.ShouldBe(union);
        actual.ShouldBe("U1:1");
    }

    [Test]
    public async Task TapT1Async_Should_NotInvoke_WhenT2()
    {
        var union = MakeT2(2);

        var result = await union.TapT1Async(u1 => ShouldNotBeCalledAsync(u1.Value));

        result.ShouldBe(union);
    }

    [Test]
    public async Task TapT1Async_Throws_When_T1Func_ReturnsNull()
    {
        var union = MakeT1(1);
        
        await Should.ThrowAsync<ArgumentNullException>(() => union.TapT1Async(null!));
    }

    [Test]
    public async Task TapT2Async_Should_Invoke_T2Func_WhenT2()
    {
        var union = MakeT2(2);
        var actual = "";

        var result = await union.TapT2Async(async u2 => { await Task.Yield(); actual = $"U2:{u2.Value}"; });

        result.ShouldBe(union);
        actual.ShouldBe("U2:2");
    }

    [Test]
    public async Task TapT2Async_Should_NotInvoke_WhenT1()
    {
        var union = MakeT1(1);

        var result = await union.TapT2Async(u2 => ShouldNotBeCalledAsync(u2.Value));

        result.ShouldBe(union);
    }

    [Test]
    public async Task TapT2Async_Throws_When_T2Func_ReturnsNull()
    {
        var union = MakeT2(2);
        
        await Should.ThrowAsync<ArgumentNullException>(() => union.TapT2Async(null!));
    }

    [Test]
    public async Task TaskTapT1_Should_Invoke_T1Func()
    {
        var task = Task.FromResult(MakeT1(1));
        var actual = "";

        var result = await task.TapT1(u1 => actual = $"U1:{u1.Value}");
        
        result.ShouldBeT1().Value.ShouldBe(1);
        actual.ShouldBe("U1:1");
    }

    [Test]
    public async Task TaskTapT2_Should_Invoke_T2Func()
    {
        var task = Task.FromResult(MakeT2(2));
        var actual = "";

        var result = await task.TapT2(u2 => actual = $"U2:{u2.Value}");
        
        result.ShouldBeT2().Value.ShouldBe(2);
        actual.ShouldBe("U2:2");
    }

    [Test]
    public async Task TaskTapT1Async_Should_Invoke_T1Func()
    {
        var task = Task.FromResult(MakeT1(1));
        var actual = "";

        var result = await task.TapT1Async(async u1 => { await Task.Yield(); actual = $"U1:{u1.Value}"; });

        result.ShouldBeT1().Value.ShouldBe(1);
        actual.ShouldBe("U1:1");
    }

    [Test]
    public async Task TaskTapT2Async_Should_Invoke_T2Func()
    {
        var task = Task.FromResult(MakeT2(2));
        var actual = "";

        var result = await task.TapT2Async(async u2 => { await Task.Yield(); actual = $"U2:{u2.Value}"; });

        result.ShouldBeT2().Value.ShouldBe(2);
        actual.ShouldBe("U2:2");
    }
}